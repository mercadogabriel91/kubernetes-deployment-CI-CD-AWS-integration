apiVersion: v1
kind: ConfigMap
metadata:
  name: argocd-image-updater-config
  namespace: argocd
data:
  registries.conf: |
    registries:
    - name: AWS ECR
      prefix: "*"
      api_url: https://api.ecr.*.amazonaws.com
      default: true
      credentials: ext:/scripts/ecr-login.sh
      credsexpiry: 12h
      ping: yes
  git.user: "argocd-image-updater"
  git.email: "noreply@argocd-image-updater"
  log.level: info
  # Git credentials will be provided via secret (see argocd-image-updater-secret)

---
apiVersion: v1
kind: Secret
metadata:
  name: argocd-image-updater-secret
  namespace: argocd
type: Opaque
stringData:
  # AWS credentials for ECR access
  # Populate these with your AWS credentials for ECR access
  AWS_ACCESS_KEY_ID: ""
  AWS_SECRET_ACCESS_KEY: ""
  # GitHub Personal Access Token for write-back to Git
  # Create at: https://github.com/settings/tokens
  # Required permissions: repo (full control of private repositories)
  git.user: "argocd-image-updater"
  git.password: ""  # GitHub Personal Access Token

